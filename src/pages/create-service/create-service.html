<ion-header>

  <ion-navbar>
    <ion-title *ngIf="!refugio" text-center class="lupa-title">Agregar servicio</ion-title>
    <ion-title *ngIf="refugio" text-center class="lupa-title">Agregar refugio</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <ion-row no-padding (click)="addPerfilPhoto()">
    <img text-center [src]="getTrustImg(imagePath)">
  </ion-row>
  <ion-list class="_list">
    <ion-list-header *ngIf="!refugio" text-center class="label_title">
      Datos del servicio
    </ion-list-header>
    <ion-list-header *ngIf="refugio" text-center class="label_title">
      Datos del refugio
    </ion-list-header>
    <ion-item>
      <ion-label color="primary" stacked>Nombre</ion-label>
      <ion-input type="text" [(ngModel)]="tienda.nombre" placeholder="Nombre"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label color="primary" stacked>Telefono</ion-label>
      <ion-input type="number" [(ngModel)]="tienda.telefono" placeholder="Telefono"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label color="primary" stacked>Email</ion-label>
      <ion-input type="email" [(ngModel)]="tienda.email" placeholder="Email"></ion-input>
    </ion-item>
    <ion-row justify-content-center *ngFor="let dia of dias; let i = index;" [ngClass]="{ 'horarios': dia.desabilitar == false,'disabled': dia.desabilitar == true }">
      <ion-col col-3 text-center>
        <ion-label>{{dia.dia}}</ion-label>
      </ion-col>
      <ion-col col-3 text-center>
        <ion-label color="primary" stacked>Apertura</ion-label>
        <ion-datetime [disabled]="dia.desabilitar" [(ngModel)]="dia.abre" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45" (ionChange)="apertura(dia)"></ion-datetime>
      </ion-col>
      <ion-col col-3 text-center>
        <ion-label color="primary" stacked>Cierre</ion-label>
        <ion-datetime [disabled]="dia.desabilitar" [(ngModel)]="dia.cierra" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45" (ionChange)="cierre(dia)"></ion-datetime>
      </ion-col>
      <ion-col col-3 text-center>
        <ion-item no-lines no-padding>
          <ion-toggle [(ngModel)]="dia.desabilitar" checked="false" (ionChange)="noAbre(dia,$event)"></ion-toggle>
        </ion-item>
      </ion-col>
    </ion-row>
    <!-- <ion-row class="horarios" justify-content-center>
      <ion-col col-3>
        <ion-label>Martes :</ion-label>
      </ion-col>
      <ion-col col-3>
        <ion-label color="primary" stacked>Apertura</ion-label>
        <ion-datetime [(ngModel)]="tienda.horarios.marAbre" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45"></ion-datetime>
      </ion-col>
      <ion-col col-3>
        <ion-label color="primary" stacked>Cierre</ion-label>
        <ion-datetime [(ngModel)]="tienda.horarios.marCierra" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45"></ion-datetime>
      </ion-col>
      <ion-col col-3>
        <ion-item no-lines no-padding>
          <ion-toggle checked="false"></ion-toggle>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row class="horarios" justify-content-center>
      <ion-col col-3>
        <ion-label>Miércoles :</ion-label>
      </ion-col>
      <ion-col col-3>
        <ion-label color="primary" stacked>Apertura</ion-label>
        <ion-datetime [(ngModel)]="tienda.horarios.mieAbre" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45"></ion-datetime>
      </ion-col>
      <ion-col col-3>
        <ion-label color="primary" stacked>Cierre</ion-label>
        <ion-datetime [(ngModel)]="tienda.horarios.mieCierra" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45"></ion-datetime>
      </ion-col>
      <ion-col col-3>
        <ion-item no-lines no-padding>
          <ion-toggle checked="false"></ion-toggle>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row class="horarios" justify-content-center>
      <ion-col col-3>
        <ion-label>Jueves :</ion-label>
      </ion-col>
      <ion-col col-3>
        <ion-label color="primary" stacked>Apertura</ion-label>
        <ion-datetime [(ngModel)]="tienda.horarios.jueAbre" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45"></ion-datetime>
      </ion-col>
      <ion-col col-3>
        <ion-label color="primary" stacked>Cierre</ion-label>
        <ion-datetime [(ngModel)]="tienda.horarios.jueCierra" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45"></ion-datetime>
      </ion-col>
      <ion-col col-3>
        <ion-item no-lines no-padding>
          <ion-toggle checked="false"></ion-toggle>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row class="horarios" justify-content-center>
      <ion-col col-3>
        <ion-label>Viernes :</ion-label>
      </ion-col>
      <ion-col col-3>
        <ion-label color="primary" stacked>Apertura</ion-label>
        <ion-datetime [(ngModel)]="tienda.horarios.vieAbre" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45"></ion-datetime>
      </ion-col>
      <ion-col col-3>
        <ion-label color="primary" stacked>Cierre</ion-label>
        <ion-datetime [(ngModel)]="tienda.horarios.vieCierra" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45"></ion-datetime>
      </ion-col>
      <ion-col col-3>
        <ion-item no-lines no-padding>
          <ion-toggle checked="false"></ion-toggle>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row class="horarios" justify-content-center>
      <ion-col col-3>
        <ion-label>Sábado :</ion-label>
      </ion-col>
      <ion-col col-3>
        <ion-label color="primary" stacked>Apertura</ion-label>
        <ion-datetime [(ngModel)]="tienda.horarios.sabAbre" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45"></ion-datetime>
      </ion-col>
      <ion-col col-3>
        <ion-label color="primary" stacked>Cierre</ion-label>
        <ion-datetime [(ngModel)]="tienda.horarios.sabCierra" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45"></ion-datetime>
      </ion-col>
      <ion-col col-3>
        <ion-item no-lines no-padding>
          <ion-toggle checked="false"></ion-toggle>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row class="horarios" justify-content-center>
      <ion-col col-3>
        <ion-label>Domingo :</ion-label>
      </ion-col>
      <ion-col col-3>
        <ion-label color="primary" stacked>Apertura</ion-label>
        <ion-datetime [(ngModel)]="tienda.horarios.domAbre" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45"></ion-datetime>
      </ion-col>
      <ion-col col-3>
        <ion-label color="primary" stacked>Cierre</ion-label>
        <ion-datetime [(ngModel)]="tienda.horarios.domCierra" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45"></ion-datetime>
      </ion-col>
      <ion-col col-3>
        <ion-item no-lines no-padding>
          <ion-toggle checked="false"></ion-toggle>
        </ion-item>
      </ion-col>
    </ion-row> -->
    <!-- <ion-item>
    </ion-item>
    <ion-item>
    </ion-item> -->
    <!-- <ion-item>
      <ion-label color="primary" stacked>Categoria</ion-label>
      <ion-select [(ngModel)]="tienda.category" multiple="true" cancelText="Cancelar" okText="Ok">
        <ion-option *ngFor="let cat of categorias" value="{{cat.categorialocalid}}">{{cat.nombre}}</ion-option>
      </ion-select>
    </ion-item> -->
    <ion-row justify-content-center style="margin-top: 3%;">
      <button class="btn_categorias" ion-button round [disabled]="refugio">Categorias
        <ion-select [(ngModel)]="tienda.category" okText="Ok" cancelText="Cancelar" multiple="true" [selectOptions]="selectOptions"
          (ionChange)="getItem(tienda.category)" selectedText=" ">
          <ion-option *ngFor="let cat of categorias" [value]="cat">{{cat.nombre}}</ion-option>
        </ion-select>
      </button>
    </ion-row>
    <ion-row *ngIf="!refugio" padding style="margin-top: 3%;" justify-content-center>
      <ion-list *ngFor="let select of catSelected[0]; let i = index;">
        <button class="btn_catSelected" ion-button round icon-end>{{select.nombre}}
          <span (click)="eliminarCategoria(i)">
            <ion-icon name="close"></ion-icon>
          </span>
        </button>
      </ion-list>
    </ion-row>
    <ion-row *ngIf="refugio" padding style="margin-top: 3%;" justify-content-center>
      <ion-list>
        <button class="btn_catSelected" ion-button round icon-end>{{catSelected[0].nombre}}
          <span (click)="eliminarCategoria(i)">
            <ion-icon name="close"></ion-icon>
          </span>
        </button>
      </ion-list>
    </ion-row>
    <!-- <ion-item>
      <a ion-item (click)="openModal({charNum: 0})">
        Seleccionar servicios ofrecidos
      </a>
      <div *ngIf="dataService">
        <ion-list unset *ngFor="let serv of dataService">
          <ion-item>
            <p color="primary">{{serv.nombre}}</p>
          </ion-item>
        </ion-list>
      </div>
    </ion-item> -->
    <ion-row style="margin: 8% 0 15% 0;">
      <ion-col col-12 no-padding>
        <ion-searchbar [(ngModel)]="query" (ionInput)="searchPlace()" placeholder="Direccion"></ion-searchbar>
      </ion-col>
      <ion-col no-padding style="padding-top: 0px!important; margin-bottom: 5%;">
        <ion-list class="list_map">
          <ion-item *ngFor="let place of places" (touchstart)="selectPlace(place)">
            <p>{{place.description}}</p>
          </ion-item>
        </ion-list>
      </ion-col>
      <div #pleaseConnect id="please-connect">
        <p>Please connect to the Internet...</p>
      </div>
      <div #map id="map">
        <!-- <ion-spinner></ion-spinner> -->
      </div>
    </ion-row>
    <ion-row *ngIf="!(tienda.direcc == '')" style="margin-top: 5%;">
      <button *ngIf="!refugio" ion-button full (click)="addService()">Agregar servicio!</button>
      <button *ngIf="refugio" ion-button full (click)="addService()">Agregar refugio!</button>
    </ion-row>
  </ion-list>

</ion-content>