<ion-header no-border no-shadow>
  <ion-navbar>
    <ion-buttons end>
      <button ion-button icon-only (click)="goToEditDog()">
        <ion-icon name="create"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-row>
    <ion-col col-1 text-center (click)="prev()">
      <ion-icon text-center name="arrow-back"></ion-icon>
    </ion-col>
    <ion-col col-10 text-center>
      <ion-slides style="width: 100% !important;" #slideWithNav2>
        <ion-slide *ngFor="let img of dog.fotos">
          <img class="circular--square" src="http://ctrlztest.com.ar/lupacan/apirest/{{img.fotourl}}" imageViewer>
        </ion-slide>
      </ion-slides>
    </ion-col>
    <ion-col col-1 text-center (click)="next()">
      <ion-icon text-center name="arrow-forward"></ion-icon>
    </ion-col>
  </ion-row>
  <ion-list>
    <ion-grid padding>
      <ion-row>
        <ion-col text-center>
          <p>
            <span class="txt-bold">{{dog.nombre}}</span>
          </p>
        </ion-col>
      </ion-row>

      <div class="doginfo">
        <ion-row>
          <ion-col col-12>
            <ion-label stacked>Periodo</ion-label>
            <p>{{edad(dog.fechanacimiento)}} años</p>
          </ion-col>
          <ion-col col-12 *ngIf="dog.perdido == '1'">
            <ion-label stacked>Lugar</ion-label>
            <p>{{dog.perdidolugar}}</p>
          </ion-col>
          <ion-col col-12 *ngIf="(dog.estaencontrado == '1' && dog.encontradolugar != '')">
            <ion-label stacked>Lugar</ion-label>
            <p>{{dog.encontradolugar}}</p>
          </ion-col>
          <ion-col col-12 *ngIf="!(dog.estaencontrado == '1' && dog.encontradolugar != '')">
            <ion-label stacked>Lugar</ion-label>
            <p>{{dog.perrodireccion}}</p>
          </ion-col>
        </ion-row>

        <div #pleaseConnect id="please-connect">
          <p>Please connect to the Internet...</p>
        </div>

        <div #map id="map" style="width: 100% !important; height: 200px !important;">
          <ion-spinner></ion-spinner>
        </div>

        <ion-row *ngIf="!dog.encontrado">
          <ion-col>
            <ion-label stacked>Características</ion-label>
            <p>{{dog.descripcion}}</p>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-label stacked>Raza</ion-label>
            <p>{{dog.raza}}</p>
          </ion-col>
          <ion-col>
            <ion-label stacked>Color</ion-label>
            <p>{{dog.color}}</p>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="dog.perdido">
          <ion-col>
            <ion-label stacked>Se perdió el:</ion-label>
            <p>{{dog.fechaPerdido}}</p>
          </ion-col>
          <ion-col>
            <ion-label stacked>En:</ion-label>
            <p>{{dog.lugarPerdido}}</p>
          </ion-col>
        </ion-row>

        <ion-row *ngIf="dog.estado == 2 && dog.caracterizticaPerdido">
          <ion-col>
            <ion-label stacked>Características cuando se perdio:</ion-label>
            <p>{{dog.caracterizticaPerdido}}</p>
          </ion-col>
        </ion-row>

        <ion-row *ngIf="dog.estado == 3">
          <ion-col col-12>
            <ion-label stacked>Se encontró el:</ion-label>
            <p>{{dog.estadofecha | date : "dd/MM/y" }}</p>
          </ion-col>
          <ion-col col-12>
            <ion-label stacked>En:</ion-label>
            <p>{{dog.estadodireccion}}</p>
          </ion-col>
        </ion-row>
        <ion-row style="margin-top: 8%" *ngIf="dog.estado == 2" justify-content-center>
          <ion-badge color="danger" class="badgePerdido">
            <h3 text-center>Esta Perdido {{dog.nombre}}!</h3>
            <p text-wrap>Lugar: {{dog.estadodireccion}}</p>
            <p>Fecha: {{dog.estadofecha | date : "dd/MM/y" }}</p>
          </ion-badge>
        </ion-row>
        <ion-row *ngIf="showMyControls && dog.estado == '1'">
          <ion-col>
            <ion-label>Está perdido:</ion-label>
          </ion-col>
          <ion-toggle checked="false" [(ngModel)]="checkAsLost"></ion-toggle>
        </ion-row>
        <ion-row *ngIf="checkAsLost" class="checks">
          <ion-col col-6>
            <ion-item no-lines>
              <ion-label>Ubicación actual</ion-label>
              <ion-checkbox color="primary" [(ngModel)]="miUbicacion"></ion-checkbox>
            </ion-item>
          </ion-col>
          <ion-col col-6>
            <ion-item no-lines>
              <ion-label>En otra ubicación</ion-label>
              <ion-checkbox color="primary" [(ngModel)]="otraUbicacion"></ion-checkbox>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="miUbicacion && !otraUbicacion">
          <ion-col col-12 text-center>
            <button ion-button no-shadow (click)="showAlert()" round color="primary">Guardar Perdido</button>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="otraUbicacion && !miUbicacion">
          <ion-col col-12>
            <ion-label stacked>Se perdió en:</ion-label>
            <ion-searchbar [(ngModel)]="query" (ionInput)="searchPlace()" placeholder="Dirección exacta"></ion-searchbar>
          </ion-col>
          <ion-col no-padding style="padding-top: 0px!important;">
            <ion-list class="list_map">
              <ion-item *ngFor="let place of places" (touchstart)="getPlace(place)">
                <p>{{place.description}}</p>
              </ion-item>
            </ion-list>
          </ion-col>
          <ion-col col-12 text-center *ngIf="otherLocation.lat != null && otherLocation.lng != null">
            <button ion-button no-shadow (click)="newDogLocation(dog)" round color="primary">Guardar Perdido</button>
          </ion-col>
        </ion-row>
        <ion-row *ngIf="showMyControls && dog.estado == '1'">
          <ion-col>
            <ion-label>Dar en adopción</ion-label>
          </ion-col>
          <ion-toggle checked="false" [(ngModel)]="checkAdpcion" (ionChange)="darEnAdopcion(dog)"></ion-toggle>
        </ion-row>
        <ion-row *ngIf="showMyControls && dog.estado == '3'">
          <ion-col>
            <ion-label>Lo tengo en casa</ion-label>
          </ion-col>
          <ion-toggle checked="false" [(ngModel)]="checkEnCasa" (ionChange)="enCasa(dog)"></ion-toggle>
        </ion-row>
        <ion-row *ngIf="showMyControls && dog.estado == '4'">
          <ion-col>
            <ion-label>Lo quiero en casa</ion-label>
          </ion-col>
          <ion-toggle checked="false" [(ngModel)]="checkEnCasa" (ionChange)="enCasa(dog)"></ion-toggle>
        </ion-row>
        <ion-row *ngIf="showMyControls && dog.estado == '4'">
          <ion-col>
            <button ion-button full (click)="transferir(dog)">Transferir Tenencia</button>
          </ion-col>
        </ion-row>
      </div>

    </ion-grid>
  </ion-list>
</ion-content>