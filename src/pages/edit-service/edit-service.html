<ion-header>

  <ion-navbar>
    <ion-title>Editar mi servicio</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <ion-row no-padding (click)="addPerfilPhoto()">
    <img *ngIf="imagenEdit" text-center src="https://ctrlztest.com.ar/lupacan/apirest/{{service['imagenes'][0]['imagen']}}">
    <img *ngIf="!imagenEdit" text-center [src]="getTrustImg(imagePath)">
  </ion-row>
  <ion-list>
    <ion-list-header text-center>
      Datos del servicio
    </ion-list-header>
    <ion-item>
      <ion-label color="primary" stacked>Nombre</ion-label>
      <ion-input type="text" [(ngModel)]="tienda.nombre" placeholder="Nombre"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label color="primary" stacked>Telefono</ion-label>
      <ion-input type="number" [(ngModel)]="tienda.telefono" placeholder="Telefono"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label color="primary" stacked>Email</ion-label>
      <ion-input type="email" [(ngModel)]="tienda.email" placeholder="Email"></ion-input>
    </ion-item>
    <ion-row justify-content-center *ngFor="let dia of dias; let i = index;" [ngClass]="{ 'horarios': dia.desabilitar == false,'disabled': dia.desabilitar == true }">
      <ion-col col-3 text-center>
        <ion-label>{{dia.dia}}</ion-label>
      </ion-col>
      <ion-col col-3 text-center>
        <ion-label color="primary" stacked>Apertura</ion-label>
        <ion-datetime [disabled]="dia.desabilitar" [(ngModel)]="dia.abre" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45"
          (ionChange)="apertura(dia)"></ion-datetime>
      </ion-col>
      <ion-col col-3 text-center>
        <ion-label color="primary" stacked>Cierre</ion-label>
        <ion-datetime [disabled]="dia.desabilitar" [(ngModel)]="dia.cierra" displayFormat="H mm" pickerFormat="H mm" minuteValues="0,15,30,45"
          (ionChange)="cierre(dia)"></ion-datetime>
      </ion-col>
      <ion-col col-3 text-center>
        <ion-item no-lines no-padding>
          <ion-toggle [(ngModel)]="dia.desabilitar" checked="false" (ionChange)="noAbre(dia,$event)"></ion-toggle>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row justify-content-center style="margin-top: 3%;">
      <button class="btn_categorias" ion-button round [disabled]="refugio">Categorias
        <ion-select [(ngModel)]="tienda.category" okText="Ok" cancelText="Cancelar" multiple="true" [selectOptions]="selectOptions"
          (ionChange)="getItem(tienda.category)" selectedText=" ">
          <ion-option *ngFor="let cat of categorias" [value]="cat">{{cat.nombre}}</ion-option>
        </ion-select>
      </button>
    </ion-row>
    <ion-row *ngIf="catSelected" padding style="margin-top: 3%;" justify-content-center>
      <ion-list *ngFor="let select of catSelected; let i = index;">
        <button class="btn_catSelected" ion-button round icon-end>{{select.nombre}}
          <span (click)="eliminarCategoria(i)">
            <ion-icon name="close"></ion-icon>
          </span>
        </button>
      </ion-list>
    </ion-row>
    <ion-row *ngIf="refugio" padding style="margin-top: 3%;" justify-content-center>
      <ion-list>
        <button class="btn_catSelected" ion-button round icon-end>{{catSelected[0].nombre}}
          <span (click)="eliminarCategoria(i)">
            <ion-icon name="close"></ion-icon>
          </span>
        </button>
      </ion-list>
    </ion-row>
    <ion-row *ngIf="service.premium == '0'" style="margin-top: 7%;" justify-content-center>
      <ion-col *ngIf="!img1" col-4 class="lupa-shadow add-photo" (click)="getImage(1)">
        <ion-icon name="camera"></ion-icon>
        Subir fotos
      </ion-col>
      <ion-col *ngIf="img1" col-4 class="lupa-shadow add-photo">
        <img src="{{imageFileName1}}">
      </ion-col>
    </ion-row>
    <ion-row *ngIf="service.premium == '1'" style="margin-top: 7%;">
      <ion-col *ngIf="!img1" col-4 class="lupa-shadow add-photo" (click)="getImage(1)">
        <ion-icon name="camera"></ion-icon>
        Subir fotos
      </ion-col>
      <ion-col *ngIf="img1" col-4 class="lupa-shadow add-photo">
        <img src="{{imageFileName1}}">
      </ion-col>
      <ion-col *ngIf="!img2" col-4 class="lupa-shadow add-photo" (click)="getImage(2)">
        <ion-icon name="camera"></ion-icon>
        Subir fotos
      </ion-col>
      <ion-col *ngIf="img2" col-4 class="lupa-shadow add-photo">
        <img src="{{imageFileName2}}">
      </ion-col>
      <ion-col *ngIf="!img3" col-4 class="lupa-shadow add-photo" (click)="getImage(3)">
        <ion-icon name="camera"></ion-icon>
        Subir fotos
      </ion-col>
      <ion-col *ngIf="img3" col-4 class="lupa-shadow add-photo">
        <img src="{{imageFileName3}}">
      </ion-col>
    </ion-row>
    <ion-row style="margin: 8% 0 15% 0;">
      <ion-col col-12 no-padding>
        <ion-searchbar [(ngModel)]="query" (ionInput)="searchPlace()" placeholder="DirecciÃ³n"></ion-searchbar>
      </ion-col>
      <ion-col no-padding style="padding-top: 0px!important; margin-bottom: 5%;">
        <ion-list class="list_map">
          <ion-item *ngFor="let place of places" (touchstart)="selectPlace(place)">
            <p>{{place.description}}</p>
          </ion-item>
        </ion-list>
      </ion-col>
      <div #pleaseConnect id="please-connect">
        <p>Please connect to the Internet...</p>
      </div>
      <div #map id="map">
        <!-- <ion-spinner></ion-spinner> -->
      </div>
    </ion-row>
    <div padding>
      <button ion-button full (click)="editService()">Guardar Cambios</button>
    </div>
  </ion-list>
  <div padding>
    <button ion-button full color="danger" (click)="deleteService()">Eliminar servicio</button>
  </div>

</ion-content>